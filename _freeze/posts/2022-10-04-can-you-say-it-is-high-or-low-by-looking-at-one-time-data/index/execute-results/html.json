{
  "hash": "8167c806c07165708d3188ce551656cf",
  "result": {
    "markdown": "---\ntitle: Can you say it is high or low by looking at one time data?\nauthor: Mitsuo Shiota\ndate: '2022-10-04'\ndate-modified: '2023-06-14'\ncategories:\n  - economics\n  - NHK\n  - R\nknitr: \n  opts_chunk: \n    out.width: '70%'\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\n\ntheme_set(theme_light())\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nread_dat1 <- function(url, sheet, year) {\n  # download\n  tf <- tempfile(fileext = \".xls\")\n  \n  httr::GET(url, httr::write_disk(tf))\n  \n  # read\n  dat <- read_excel(tf, sheet = sheet)\n  ratios <- dat[5, 9] %>% \n    as.numeric()\n  names(ratios) <- year\n  \n  # return\n  ratios\n}\n\nread_dat2 <- function(url, sheet1, sheet2, year) {\n  # download\n  tf <- tempfile(fileext = \".xls\")\n  \n  httr::GET(url, httr::write_disk(tf))\n  \n  # read\n  dat1 <- read_excel(tf, sheet = sheet1)\n  sales <- as.numeric(dat1[4, 12]) * 100\n  \n  dat2 <- read_excel(tf, sheet = sheet2)\n  costs <- as.numeric(dat2[6, 6])\n  \n  ratios <- costs / sales * 100\n  names(ratios) <- year\n  \n  # return\n  ratios\n}\n\nread_dat3 <- function(url, sheet1, r1, c1, sheet2, r2, c2, year) {\n  # download\n  tf <- tempfile(fileext = \".xls\")\n  \n  httr::GET(url, httr::write_disk(tf))\n  \n  # read\n  dat1 <- read_excel(tf, sheet = sheet1)\n  sales <- as.numeric(dat1[r1, c1])\n  \n  dat2 <- read_excel(tf, sheet = sheet2)\n  costs <- parse_number(as.character(dat2[r2, c2]))\n  \n  ratios <- costs / sales * 100\n  names(ratios) <- year\n  \n  # return\n  ratios\n}\n\nread_dat4 <- function(url, sheet1, r1, c1, sheet2, r2, c2, year) {\n  # download\n  tf <- tempfile(fileext = \".xlsx\")\n  \n  httr::GET(url, httr::write_disk(tf))\n  \n  # read\n  dat1 <- read_excel(tf, sheet = sheet1)\n  sales <- as.numeric(dat1[r1, c1])\n  \n  dat2 <- read_excel(tf, sheet = sheet2)\n  costs <- parse_number(as.character(dat2[r2, c2]))\n  \n  ratios <- costs / sales * 100\n  names(ratios) <- year\n  \n  # return\n  ratios\n}\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndat <- rep(NA_real_, 27)\n\ndat[1] <- read_dat1(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031365960&fileKind=0\", 8, 1994)\n\ndat[2] <- read_dat1(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031365902&fileKind=0\", 10, 1995)\n\ndat[3] <- read_dat2(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031365900&fileKind=0\", 2, 11, 1996)\n\ndat[4] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031365898&fileKind=0\", 8, 4, 3, 11, 5, 6, 1997)\n\ndat[5] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000002335269&fileKind=0\", 16, 4, 3, 19, 6, 6, 1998)\n\ndat[6] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000002335267&fileKind=0\", 15, 4, 3, 18, 6, 6, 1999)\n\ndat[7] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000002335264&fileKind=0\", 16, 4, 3, 19, 6, 6, 2000)\n\ndat[8] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000002335251&fileKind=0\", 16, 4, 3, 19, 6, 6, 2001)\n\ndat[9] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000002335238&fileKind=0\", 6, 4, 3, 9, 6, 6, 2002)\n\ndat[10] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000002335227&fileKind=0\", 5, 4, 3, 8, 6, 6, 2003)\n\ndat[11] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000002335186&fileKind=0\", 6, 5, 6, 9, 6, 6, 2004)\n\ndat[12] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000002335198&fileKind=0\", 5, 5, 3, 8, 6, 6, 2005)\n\ndat[13] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000002332496&fileKind=0\", 5, 4, 3, 8, 6, 6, 2006)\n\ndat[14] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000008797328&fileKind=0\", 5, 5, 3, 8, 6, 6, 2007)\n\ndat[15] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000008862770&fileKind=0\", 5, 4, 3, 8, 6, 6, 2008)\n\ndat[16] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000012448588&fileKind=0\", 5, 4, 3, 8, 6, 6, 2009)\n\ndat[17] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031364720&fileKind=0\", 5, 4, 3, 8, 6, 6, 2010)\n\ndat[18] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031364766&fileKind=0\", 5, 4, 3, 8, 6, 6, 2011)\n\ndat[19] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031364844&fileKind=0\", 5, 4, 3, 8, 6, 6, 2012)\n\ndat[20] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031364750&fileKind=0\", 5, 4, 3, 8, 6, 6, 2013)\n\ndat[21] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031435520&fileKind=0\", 5, 4, 3, 8, 6, 6, 2014)\n\ndat[22] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031626692&fileKind=0\", 5, 4, 3, 8, 6, 6, 2015)\n\ndat[23] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031735887&fileKind=0\", 5, 4, 3, 8, 6, 6, 2016)\n\ndat[24] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031841099&fileKind=0\", 5, 4, 3, 8, 6, 6, 2017)\n\ndat[25] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000031974813&fileKind=0\", 5, 4, 3, 8, 6, 6, 2018)\n\ndat[26] <- read_dat4(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000032116539&fileKind=0\", 5, 6, 4, 8, 7, 7, 2019)\n\ndat[27] <- read_dat3(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000032210740&fileKind=0\", 5, 6, 4, 8, 7, 7, 2020)\n```\n:::\n\n\n## Can you say 80% is high just by looking at FY 2020 data?\n\nMr. Shunsuke Kobayashi, Chief Economist of Mizuho Securities, said that high cost of goods sold per sales ratio, 80 percent according to METI business activity survey, is the evidence that businesses could not transfer an increase in commodity and materials costs to sales price, in the evening NHK program [\"Close-up Gendai\" on October 3](https://www.nhk.or.jp/gendai/articles/4708/).\n\nI was surprised that he says 80% is high. So I get METI business activity survey data from [e-stat](https://www.e-stat.go.jp/stat-search?page=1&toukei=00550100), and plot from fiscal year 1994 to 2020 as below. FY 2020 is the most recent one. As there is no upward trend, 80% in FY 2020 is not high compared to the past.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntibble(\n  year = 1994:2020,\n  sales_cost_ratio = dat\n) %>% \n  ggplot(aes(year, sales_cost_ratio)) +\n  geom_line() +\n  scale_y_continuous(limits = c(0, 100), breaks = seq(0, 100 , 20), \n                     expand = c(0, 0)) +\n  labs(x = NULL, y = \"Cost of goods sold to sales ratios (%)\",\n       title = \"No upward trend in COGS to sales ratios up to FY 2020\",\n       caption = \"Source: METI business activity survey\")\n```\n\n::: {.cell-output-display}\n![Cost of goods sold to sales ratios from 1994 to 2020](index_files/figure-html/fig-plot_time_series-1.png){#fig-plot_time_series fig-align='center' width=70%}\n:::\n:::\n\n\nHe may have considered 80% is high, when compared to some foreign countries. But this number, COGS to sales ratio in total, is not appropriate for cross-country comparison, because industrial structure, corporate structure and counting method matter. In a country where just one company produces and sells goods in a country, COGS to sales ratio in total will be very low. In another country where many divided companies transact each other, it will be higher. In addition, as COGS to sales ratios vary by industry as below, composition of industries effects total ratio.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <- \"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000032210740&fileKind=0\"\n\n# download\ntf <- tempfile(fileext = \".xls\")\n\nhttr::GET(url, httr::write_disk(tf))\n```\n\n```{.r .cell-code}\n# read\ndat1 <- read_excel(tf, sheet = 5, skip = 5)\ndat2 <- read_excel(tf, sheet = 8, skip = 6)\n\ndat_2020 <- bind_cols(dat1[, c(1:2, 4)], dat2[, 7])\nnames(dat_2020) <- c(\"code\", \"industry_j\", \"sales\", \"cogs\")\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndat_2020 %>% \n  mutate(ratio = cogs / sales) %>% \n  filter(code %in% c(\"000\", \"C\", \"E\", \"F\", \"G\", \"I1\", \"I2\", \"J1\")) %>% \n  mutate(\n    industry_e = c(\"Total\", \"Mining\", \"Manifacturing\", \"Electric and gas\", \"Information and communication\", \"Wholesale\", \"Retail\", \"Credit card finance\"),\n    industry_e = fct_reorder(industry_e, ratio)\n    ) %>% \n  ggplot(aes(ratio, industry_e)) +\n  geom_col() +\n  scale_x_continuous(labels = scales::percent,\n                     limits = c(0, 1),\n                     breaks = seq(0, 1, 0.2),\n                     expand = c(0, 0)) +\n  labs(y = NULL, x = \"Cost of goods sold to sales ratios in FY 2020 (%)\",\n       title = \"COGS to sales ratios vary by industry\",\n       caption = \"Source: METI business activity survey\")\n```\n\n::: {.cell-output-display}\n![Cost of goods sold to sales ratios by industry in 2020](index_files/figure-html/fig-plot_by_industry-1.png){#fig-plot_by_industry fig-align='center' width=70%}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}