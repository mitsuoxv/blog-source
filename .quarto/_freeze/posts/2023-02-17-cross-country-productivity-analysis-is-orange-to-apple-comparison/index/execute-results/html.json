{
  "hash": "ed3a26cf8da3d9aa6ed651fb9f76877f",
  "result": {
    "markdown": "---\ntitle: Cross-country productivity analysis is orange to apple comparison\nauthor: Mitsuo Shiota\ndate: '2023-02-17'\ndate-modified: '2023-06-14'\ncategories:\n  - economics\n  - Nikkei\nknitr: \n  opts_chunk: \n    out.width: '70%'\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(patchwork)\n\nlibrary(scales)\ntheme_set(theme_light())\n\nlibrary(OECD)\nlibrary(gghighlight)\n```\n:::\n\n\n## Productivity comparison between the U.S. and Japan\n\n[Prof Tetsuji Okazaki of the University of Tokyo](https://www.e.u-tokyo.ac.jp/fservice/faculty/okazaki/okazaki-e/okazaki01-e.html) shows Japan lags the US in labor productivity level, and the gap is widening, in his [\"Lecture on Economics\" in Nikkei news paper on February 17, 2023 (Japanese)](https://www.nikkei.com/article/DGXZQOCD2515M0V20C23A1000000/).\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncountries <- c(\"USA\", \"JPN\", \"GBR\", \"DEU\", \"FRA\", \"ITA\", \"CAN\")\n\nexchange_rate <- get_dataset(\n  \"SNA_TABLE4\",\n  filter = list(countries, c(\"PPPGDP\")),\n  start_time = 2005, end_time = 2021\n) |> \n  mutate(across(c(ObsValue, Time), as.numeric))\n\ngdp <- get_dataset(\n  \"SNA_TABLE1\",\n  filter = list(countries, \"B1_GE\", c(\"DOB\", \"C\", \"V\")),\n  start_time = 2005, end_time = 2021\n) |> \n  mutate(across(c(ObsValue, Time), as.numeric))\n\nlabor <- get_dataset(\n  \"ALFS_SUMTAB\",\n  filter = list(countries, \"YGTT08L1_ST\"),\n  start_time = 2005, end_time = 2021\n) |> \n  mutate(across(c(ObsValue, Time), as.numeric))\n\nhours_worked <- get_dataset(\n  \"ANHRS\",\n  filter = list(countries, \"TE\"),\n  start_time = 2005, end_time = 2021\n) |> \n  mutate(across(c(ObsValue, Time), as.numeric))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nus_deflator <- gdp |> \n  filter(LOCATION == \"USA\", MEASURE == \"DOB\") |> \n  mutate(deflator = ObsValue / 100) |> \n  select(Time, deflator)\n\nemployment <- labor |> \n  select(LOCATION, Time, employment = ObsValue)\n\nppp <- exchange_rate |> \n  select(LOCATION, Time, ppp = ObsValue)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nppp_method <- gdp |> \n  filter(MEASURE == \"C\") |> \n  left_join(employment, by = c(\"LOCATION\", \"Time\")) |> \n  left_join(ppp, by = c(\"LOCATION\", \"Time\")) |> \n  left_join(us_deflator, by = \"Time\") |> \n  mutate(\n    nominal_prod_loc = ObsValue / employment,\n    nominal_prod_usd = nominal_prod_loc / ppp,\n    real_prod_usd = nominal_prod_usd / deflator\n    ) |> \n  group_by(LOCATION) |> \n  mutate(index = real_prod_usd / real_prod_usd[1] * 100) |> \n  ungroup()\n  \np1 <- ppp_method |> \n  filter(LOCATION %in% c(\"USA\", \"JPN\")) |> \n  mutate(LOCATION = factor(LOCATION, levels = c(\"USA\", \"JPN\"))) |> \n  ggplot(aes(Time, real_prod_usd)) +\n  geom_line(aes(color = LOCATION)) +\n  labs(x = NULL, y = \"Real productivity per person\\n(thousand dollars, PPP, 2015 price)\",\n       color = \"Country\")\n\np2 <- ppp_method |> \n  filter(LOCATION %in% c(\"USA\", \"JPN\")) |> \n  mutate(LOCATION = factor(LOCATION, levels = c(\"USA\", \"JPN\"))) |> \n  ggplot(aes(Time, index)) +\n  geom_line(aes(color = LOCATION)) +\n  scale_y_continuous(limits = c(85, 125)) +\n  labs(x = NULL, y = \"Real productivity per person\\n(2005 = 100)\",\n       color = \"Country\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhours_worked_te <- hours_worked |> \n  select(COUNTRY, Time, hours_worked = ObsValue)\n\nnon_ppp_method <- gdp |> \n  filter(MEASURE == \"V\") |> \n  left_join(employment, by = c(\"LOCATION\", \"Time\")) |> \n  left_join(hours_worked_te, by = c(\"LOCATION\" = \"COUNTRY\", \"Time\")) |> \n  mutate(\n    real_prod_loc = ObsValue / employment,\n    real_prod_loc_hr = real_prod_loc / hours_worked\n    ) |> \n  group_by(LOCATION) |> \n  mutate(\n    prod_per_person = real_prod_loc / real_prod_loc[1] * 100,\n    prod_per_hour = real_prod_loc_hr / real_prod_loc_hr[1] * 100\n    ) |> \n  ungroup()\n\np3 <- non_ppp_method |> \n  filter(LOCATION %in% c(\"USA\", \"JPN\")) |> \n  mutate(LOCATION = factor(LOCATION, levels = c(\"USA\", \"JPN\"))) |> \n  ggplot(aes(Time, prod_per_person)) +\n  geom_line(aes(color = LOCATION)) +\n  geom_line(aes(y = index), color = \"gray80\",\n            data = ppp_method |> filter(LOCATION == \"JPN\")) +\n  scale_y_continuous(limits = c(85, 125)) +\n  labs(x = NULL, y = \"Real productivity per person\\n(2005 = 100)\",\n       color = \"Country\")\n\np4 <- non_ppp_method |> \n  filter(LOCATION %in% c(\"USA\", \"JPN\")) |> \n  mutate(LOCATION = factor(LOCATION, levels = c(\"USA\", \"JPN\"))) |> \n  ggplot(aes(Time, prod_per_hour)) +\n  geom_line(aes(color = LOCATION)) +\n  scale_y_continuous(limits = c(85, 125)) +\n  labs(x = NULL, y = \"Real productivity per hour\\n(2005 = 100)\",\n       color = \"Country\")\n```\n:::\n\n\nHe shows the chart which is not exactly same, but similar to the left chart below, and says the gap in labor productivity level between the US and Japan is widening. I have modified it to make the right chart so that 2005 = 100. He uses PPP method. I think it is very difficult or impossible to compare the productivity level, as Japan and the US produce very different products and services. It is only possible to compare productivity growth, then using PPP is unnecessary and inappropriate.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np1 + p2 + plot_layout(ncol = 2, guides = \"collect\") + plot_annotation(\n  title = \"PPP method: nominal GDP per employed person in JPY\\nconverted to USD by PPP, then deflated to real by US GDP deflator\",\n  caption = \"Source: OECD stat\"\n)\n```\n\n::: {.cell-output-display}\n![Per-person productivity in 2015 dollars (PPP) and its index (2005 = 100)](index_files/figure-html/fig-ppp_method_chart-1.png){#fig-ppp_method_chart fig-align='center' width=70%}\n:::\n:::\n\n\nBelow is the estimates of labor productivity growth without using PPP. Growth gap narrows in the left below. If we look at productivity per hour instead of per person in the right below, the gap narrows even further.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np3 + p4 + plot_layout(ncol = 2, guides = \"collect\") + plot_annotation(\n  title = \"Non PPP method: real GDP per employed person or per hour in JPY \\nindexed at 2005 = 100\",\n  subtitle = \"Gray line in the left is JPN by PPP method, the same as above right\",\n  caption = \"Source: OECD stat\"\n)\n```\n\n::: {.cell-output-display}\n![Per-person and per-hour productivity index (2005 = 100)](index_files/figure-html/fig-non_ppp_method_chart-1.png){#fig-non_ppp_method_chart fig-align='center' width=70%}\n:::\n:::\n\n\n## Productivity comparison among G7 countries\n\nAlthough Japan looks like a loser in productivity per person in PPP dollars, it is not a loser in growth of productivity per hour.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np5 <- ppp_method |> \n  ggplot(aes(Time, real_prod_usd)) +\n  geom_line(aes(color = LOCATION)) +\n  gghighlight(LOCATION == \"JPN\", use_group_by = FALSE) +\n  labs(x = NULL, y = \"Real productivity per person\\n(thousand dollars, PPP, 2015 price)\",\n       color = \"Country\")\n\np6 <- non_ppp_method |> \n  ggplot(aes(Time, prod_per_person)) +\n  geom_line(aes(color = LOCATION)) +\n  gghighlight(LOCATION == \"JPN\", use_group_by = FALSE) +\n  scale_y_continuous(limits = c(85, 125)) +\n  labs(x = NULL, y = \"Real productivity per person (2005 = 100)\",\n       color = \"Country\")\n\np7 <- non_ppp_method |> \n  ggplot(aes(Time, prod_per_hour)) +\n  geom_line(aes(color = LOCATION)) +\n  gghighlight(LOCATION == \"JPN\", use_group_by = FALSE) +\n  scale_y_continuous(limits = c(85, 125)) +\n  labs(x = NULL, y = \"Real productivity per hour (2005 = 100)\",\n       color = \"Country\")\n\np5 + p6 + p7 + plot_layout(ncol = 3, guides = \"collect\") + plot_annotation(\n  title = \"Japan is not a loser in growth of productivity per hour\\namong G7 countries\",\n  caption = \"Source: OECD stat\"\n)\n```\n\n::: {.cell-output-display}\n![Per-person productivity in 2015 dollars (PPP), per-person and per-hour productivity index (2005 = 100)](index_files/figure-html/fig-g7-1.png){#fig-g7 fig-align='center' width=70%}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}