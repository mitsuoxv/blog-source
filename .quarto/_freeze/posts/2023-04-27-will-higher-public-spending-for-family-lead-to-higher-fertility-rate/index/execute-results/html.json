{
  "hash": "c6c9ed5c0ece48f52057876897656013",
  "result": {
    "markdown": "---\ntitle: Will higher public spending for family lead to higher fertility rate?\nauthor: Mitsuo Shiota\ndate: '2023-04-27'\ndate-modified: '2023-06-14'\ncategories:\n  - economics\n  - R\n  - Media\nknitr: \n  opts_chunk: \n    out.width: '70%'\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\n\ntheme_set(theme_light())\n\nlibrary(OECD)\nlibrary(countrycode)\n\nlibrary(janitor)\nlibrary(ggrepel)\n```\n:::\n\n\n## Assertions in the Economic and Fiscal Advisory Council material\n\nThe headline of [Asahi Shinbun article on April 27, 2023 (Japanese)](https://www.asahi.com/articles/ASR4V72G8R4VULFA01D.html) caught my eye, which is \"5 trillion increase in public expenditure for family is estimated to increase population by 0.9 to 1.8 million persons in 2060.\" This article let me know the estimate on page 3 titled \"Possible utilization of EBPM to analyze policy effects\" in [the Economic and Fiscal Advisory Council material presented by 4 private-sector members on April 26, 2023 (Japanese)](https://www5.cao.go.jp/keizai-shimon/kaigi/minutes/2023/0426/shiryo_01_2.pdf).\n\nIt shows the figure below, and warns us that correlation is not causality in the footnote. Title is \"Correlation between public expenditure for family and fertility rate in OECD countries.\" X-axis is percent ratio of public expenditure for family to GDP in 2017, and Y-axis is fertility rate in 2021. Red point is Japan. I find 34 points in the figure.\n\n![Quoted figure titled correlation between public expenditure for family and fertility rate](images/Screenshot%20from%202023-04-28%2009-05-19.png){#fig-screenshot fig-alt=\"Quoted figure titled correlation between public expenditure for family and fertility rate\" fig-align=\"center\" width=\"70%\"}\n\nThen, they make a causal statement, \"1 percent of GDP (5 trillion yen) increase in public expenditure for family leads to 0.05 to 0.1 increase in fertility rate. This estimate is based on 30 OECD countries data since 2010\".\n\nI have got confused. Do they think this figure, which does not show confidence interval, suggests correlation? And, even if it does, do they think they can morph correlation into causality by more samples from multiple years? So I have decided to get data from OECD.stat.\n\n## Replicate the quoted figure\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# OECD 38 countries\noecd_countries <- c(\"ISR\", \"LUX\", \"NLD\", \"GRC\", \"ISL\", \"LVA\", \"SVN\", \"FRA\", \"POL\", \"TUR\", \"ESP\", \"BEL\", \"MEX\", \"IRL\", \"CHE\", \"FIN\", \"CHL\", \"CAN\", \"KOR\", \"NZL\", \"AUS\", \"HUN\", \"USA\", \"GBR\", \"AUT\", \"SWE\", \"DNK\", \"SVK\", \"CZE\", \"COL\", \"JPN\", \"NOR\",\"CRI\", \"LTU\", \"DEU\", \"EST\", \"PRT\", \"ITA\")\n\n# \"OAVG\" OECD average\nfamily <- get_dataset(\n  \"FAMILY\",\n  filter = list(c(oecd_countries, \"OAVG\"), \"TOTAL\", c(\"FAM1\", \"FAM3\")),\n  start_time = 1990, end_time = 2021\n  ) |> \n  clean_names() |> \n  mutate(\n    obs_value = parse_number(obs_value),\n    time = parse_number(time)\n    )\n\n# \"OECD\" OECD average\nfamily_expenditure <- get_dataset(\n  \"SOCX_AGG\",\n  filter = list(\"10\", \"5\", \"0\", \"0\", \"PCT_GDP\", c(oecd_countries, \"OECD\")),\n  start_time = 1980, end_time = 2021\n  ) |> \n  clean_names() |> \n  mutate(\n    obs_value = if_else(obs_value == \"NaN\", NA, obs_value),\n    obs_value = parse_number(obs_value),\n    time = parse_number(time)\n    )\n\n# fertility rate vs public family expenditure; point\nfer_vs_exp <- family |> \n  filter(ind == \"FAM1\", time == 2021) |> \n  select(cou, fertility = obs_value) |> \n  mutate(cou = if_else(cou == \"OAVG\", \"OECD\", cou)) |> \n  left_join(family_expenditure |> \n              filter(time == 2017) |> \n              select(cou = country, fam_exp = obs_value),\n            by = \"cou\") |> \n  mutate(\n    country = if_else(cou == \"OECD\",\n                      \"OECD average\",\n                      countrycode(cou, \"iso3c\", \"country.name\"))\n  )\n\nfer_vs_exp2 <- fer_vs_exp |>\n  filter(cou != \"OECD\")\n```\n:::\n\n\nI plot the replicated chart below with confidence interval. There are 38 points, as this chart includes all 38 OECD countries. It is uncertain whether the slope is positive or negative.\n\n\n::: {.cell layout-align=\"center\" fig.asp='1'}\n\n```{.r .cell-code}\nfer_vs_exp2 |> \n  ggplot(aes(fam_exp, fertility)) +\n  geom_point(aes(color = cou == \"JPN\"), show.legend = FALSE) +\n  geom_smooth(method = \"lm\", formula = y ~ x) +\n  geom_text_repel(aes(color = cou == \"JPN\", label = country),\n                  show.legend = FALSE) +\n  scale_color_manual(values = c(\"gray50\", \"red\")) +\n  coord_cartesian(xlim = c(0, 4), ylim = c(0, 3)) +\n  labs(x = \"Ratio of public expenditure for family to GDP\\n(percent, 2017)\",\n       y = \"Fertility rate\\n(percent, 2021)\",\n       title = \"No clear correlation between public expenditure for family\\nand fertility rate in one year\",\n       caption = \"Source: OECD.stat\")\n```\n\n::: {.cell-output-display}\n![No clear correlation in one year](index_files/figure-html/fig-fer_vs_exp2-1.png){#fig-fer_vs_exp2 fig-align='center' width=70%}\n:::\n:::\n\n\nIt is difficult to say there is a positive or negative correlation.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfer_exp_model <- lm(fertility ~ fam_exp, data = fer_vs_exp2)\nsummary(fer_exp_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = fertility ~ fam_exp, data = fer_vs_exp2)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.70589 -0.13334 -0.02066  0.09695  1.41083 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  1.44241    0.14142  10.200 3.65e-12 ***\nfam_exp      0.06662    0.06362   1.047    0.302    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.3104 on 36 degrees of freedom\nMultiple R-squared:  0.02956,\tAdjusted R-squared:  0.002604 \nF-statistic: 1.097 on 1 and 36 DF,  p-value: 0.302\n```\n:::\n:::\n\n\n## Narrower confidence interval from multiple years data?\n\nI turn to multiple years data from 2010 to 2021 for fertility rate, and 2006 to 2017 for public expenditure for family, as I guess they assume 4 year ago public expenditure for family effects fertility rate this year. Confidence interval is now much narrower, as the sample size is larger.\n\n\n::: {.cell layout-align=\"center\" fig.asp='1'}\n\n```{.r .cell-code}\nfamily_expenditure_4yr_ago <- family_expenditure |>\n  select(cou = country, time, fam_exp = obs_value) |> \n  mutate(time = time + 4)\n\nfer_vs_exp_multi <- family |> \n  filter(ind == \"FAM1\") |> \n  select(cou, time, fertility = obs_value) |> \n  mutate(cou = if_else(cou == \"OAVG\", \"OECD\", cou)) |> \n  left_join(family_expenditure_4yr_ago,\n            by = c(\"cou\", \"time\")) |> \n  mutate(\n    country = if_else(cou == \"OECD\",\n                      \"OECD average\",\n                      countrycode(cou, \"iso3c\", \"country.name\"))\n    )\n\nfer_vs_exp_multi2 <- fer_vs_exp_multi |>\n  filter(cou != \"OECD\", time >= 2010, time <= 2021)\n\nfer_vs_exp_multi2 |> \n  ggplot(aes(fam_exp, fertility)) +\n  geom_path(aes(color = country)) +\n  geom_smooth(method = \"lm\", formula = y ~ x) +\n  coord_cartesian(xlim = c(0, 4), ylim = c(0, 3)) +\n  labs(x = \"Ratio of public expenditure for family to GDP\\n(percent, 4 years ago)\",\n       y = \"Fertility rate\\n(percent, current year)\",\n       color = NULL,\n       title = \"Apparent positive correlation between public expenditure for family and\\nfertility rate from 2010-2021 data. Is it real?\",\n       subtitle = \"Each colored line is a country.\",\n       caption = \"Source: OECD.stat\") +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![Apparent positive correlation in 2010-2021](index_files/figure-html/fig-fer_vs_exp_multi-1.png){#fig-fer_vs_exp_multi fig-align='center' width=70%}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfer_exp_multi_model <- lm(fertility ~ fam_exp, data = fer_vs_exp_multi2)\n```\n:::\n\n\nThe slope is estimated as 0.047, which is close to their assertion of 0.05 to 0.1 based on 30 countries. P-value is less than 0.01.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(fer_exp_multi_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = fertility ~ fam_exp, data = fer_vs_exp_multi2)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.79849 -0.20412 -0.05127  0.12143  1.46186 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  1.55612    0.03751   41.48  < 2e-16 ***\nfam_exp      0.04748    0.01649    2.88  0.00416 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.3288 on 445 degrees of freedom\n  (9 observations deleted due to missingness)\nMultiple R-squared:  0.0183,\tAdjusted R-squared:  0.0161 \nF-statistic: 8.296 on 1 and 445 DF,  p-value: 0.004164\n```\n:::\n:::\n\n\n## It's a bad idea to treat cross-country multiple-year data as independent observations\n\nShould I agree with them? Absolutely not. Each colored line does not show a positive slope. The positive slope of the fitted line comes mainly from cross-country differences. And there is no positive correlation between public spending for family and fertility rate either in Japan or OECD average in the figure below.\n\n\n::: {.cell layout-align=\"center\" fig.asp='1'}\n\n```{.r .cell-code}\noecd_jpn <- fer_vs_exp_multi |> \n  filter(cou %in% c(\"OECD\", \"JPN\")) |> \n  filter(!is.na(fam_exp), !is.na(fertility))\n\noecd_jpn |> \n  ggplot(aes(fam_exp, fertility)) +\n  geom_path(aes(color = country)) +\n  geom_label_repel(aes(label = time),\n             data = oecd_jpn |> \n               filter(time %in% c(1990, 2021))) +\n  coord_cartesian(xlim = c(0, 4), ylim = c(0, 3)) +\n  labs(x = \"Ratio of public expenditure for family to GDP\\n(percent, 4 years ago)\",\n       y = \"Fertility rate\\n(percent, current year)\",\n       color = NULL,\n       title = \"No positive correlation over years between public spending for\\nfamily and fertility rate either in Japan or OECD average\",\n       caption = \"Source: OECD.stat\") +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![1990-2021 in Japan and OECD average](index_files/figure-html/fig-oecd_jpn-1.png){#fig-oecd_jpn fig-align='center' width=70%}\n:::\n:::\n\n\n## Causality does not come from data\n\nStill they can argue fertility rate would have fallen deeper without an increase in public expenditure for family. This counterfactual argument should be based on some assumed causal mechanism. Increasing the number of samples does not morph correlation into causality, anyway. Do not try to increase the number of samples in a weird way.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}